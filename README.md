# lottery-new-year
auth deyongz@jumei.com at 2016
nodejs -v 4.2.1

微信互动-年会抽奖系统

该抽奖系统包含了微信互动抽奖和券号抽奖； 抽奖界面由H5实现效果，微信互动的显示采用flex开发并在屏幕上弹幕显示。 flex弹幕软件源代码在danmu-flex-src目录当中，danmu.air文件是编译好的包

服务端采用NODEJS+express编写，依赖memcached、imageMagick；弹幕显示支持头像显示，头像在node服务器端会缓存到node服务器，在年会现场可以节约外部带宽的压力。

运行：node bin/www启动服务器

微信抽奖界面: :8080/ 券号抽奖界面: :8080/ticket 抽奖界面快捷键： 1,2,3,4数字按键抽第几轮，S 洒头像或者券号到界面中 ，R 开始运行滚动画面 P停滚动出中奖结果，shift+1，2，3是券号抽第几等奖

后台微信消息审核地址 :8080/check 账号和密码在源代码写死的，该界面采用了websocket，可以实时显示新消息，便于审核

弹幕显示的请求地址是直接填写node服务器的地址和端口号即可如：http://127.0.0.1:8080

服务器端基本配置在app.js当中，可以配置券号抽奖的号段："1-200,300-350",抽奖轮数和券号多少等奖和轮数，服务器地址需要配置serverinfo中，微信敏感词等。
